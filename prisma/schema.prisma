// Genera el cliente Prisma para usar en JavaScript/TypeScript
generator client {
  provider = "prisma-client-js"
}

// Fuente de datos: base de datos PostgreSQL
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // Se obtiene desde el archivo .env
}

// Tabla de usuarios del sistema
model Usuario {
  id       Int      @id @default(autoincrement()) // ID autoincremental
  nombre   String
  email    String   @unique                      // El email debe ser único
  password String                                // Contraseña hasheada
  rol      String                                // admin | user, etc.
  boletos  Boleto[]                              // Relación uno a muchos con Boleto
}

// Tabla de rutas de viaje
model Ruta {
  id          Int      @id @default(autoincrement())
  origen      String                                // Ciudad de origen
  destino     String                                // Ciudad de destino
  fechaHora   DateTime                              // Fecha y hora de salida
  boletos     Boleto[]                              // Relación con boletos vendidos
  camionId    Int
  camion      Camion   @relation(fields: [camionId], references: [id]) // Relación con Camion
}

// Tabla de camiones disponibles
model Camion {
  id        Int     @id @default(autoincrement())
  modelo    String                                // Modelo del bus
  capacidad Int                                   // Número total de asientos
  rutas     Ruta[]                                // Rutas asignadas al camión
}

// Tabla de boletos vendidos
model Boleto {
  id        Int      @id @default(autoincrement())
  usuario   Usuario  @relation(fields: [usuarioId], references: [id])
  usuarioId Int                                      // FK a Usuario
  ruta      Ruta     @relation(fields: [rutaId], references: [id])
  rutaId    Int                                      // FK a Ruta
  usado     Boolean  @default(false)                 // ¿El boleto fue utilizado?
}